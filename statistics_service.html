
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Th·ªëng k√™ d·ªãch v·ª•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

<div class="container mt-4">
    <h3 class="mb-4">üìä Th·ªëng k√™ s·ª≠ d·ª•ng d·ªãch v·ª•</h3>

    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card shadow text-center">
                <div class="card-body">
                    <h6>T·ªïng l∆∞·ª£t s·ª≠ d·ª•ng</h6>
                    <h3 id="totalUse">0</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow text-center">
                <div class="card-body">
                    <h6>T·ªïng doanh thu</h6>
                    <h3 id="totalRevenue">0ƒë</h3>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow text-center">
                <div class="card-body">
                    <h6>D·ªãch v·ª• b√°n ch·∫°y</h6>
                    <h3 id="topService">---</h3>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-body">
            <canvas id="serviceChart"></canvas>
        </div>
    </div>

    <div class="card shadow">
        <div class="card-body">
            <h5>Chi ti·∫øt d·ªãch v·ª•</h5>
            <table class="table table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>D·ªãch v·ª•</th>
                        <th>S·ªë l∆∞·ª£t</th>
                        <th>Doanh thu</th>
                    </tr>
                </thead>
                <tbody id="serviceTable"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
fetch('thongke_dichvu_api.php')
.then(res => res.json())
.then(data => {
    document.getElementById('totalUse').innerText = data.total_use;
    document.getElementById('totalRevenue').innerText = data.total_revenue.toLocaleString() + 'ƒë';
    document.getElementById('topService').innerText = data.top_service;

    let labels = [], values = [];
    let tableHtml = '';

    data.services.forEach(s => {
        labels.push(s.ten_dich_vu);
        values.push(s.so_luot);
        tableHtml += `
            <tr>
                <td>${s.ten_dich_vu}</td>
                <td>${s.so_luot}</td>
                <td>${Number(s.doanh_thu).toLocaleString()}ƒë</td>
            </tr>`;
    });

    document.getElementById('serviceTable').innerHTML = tableHtml;

    new Chart(document.getElementById('serviceChart'), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'S·ªë l∆∞·ª£t s·ª≠ d·ª•ng',
                data: values
            }]
        }
    });
});
</script>

</body>
</html>
```

---

## 2Ô∏è‚É£ API PHP (thongke_dichvu_api.php)

```php
<?php
header('Content-Type: application/json; charset=utf-8');

$conn = new PDO("mysql:host=localhost;dbname=quan_li_khach_san;charset=utf8","root","");

$sql = "
SELECT dv.ten_dich_vu,
       COUNT(sd.SuDungID) AS so_luot,
       SUM(sd.SoLuong * dv.gia) AS doanh_thu
FROM sudungdichvu sd
JOIN dich_vu dv ON sd.DichVuID = dv.id
GROUP BY sd.DichVuID
";

$data = $conn->query($sql)->fetchAll(PDO::FETCH_ASSOC);

$totalUse = 0;
$totalRevenue = 0;
$topService = '';
$max = 0;

foreach ($data as $row) {
    $totalUse += $row['so_luot'];
    $totalRevenue += $row['doanh_thu'];
    if ($row['so_luot'] > $max) {
        $max = $row['so_luot'];
        $topService = $row['ten_dich_vu'];
    }
}

echo json_encode([
    'total_use' => $totalUse,
    'total_revenue' => $totalRevenue,
    'top_service' => $topService,
    'services' => $data
]);
```

---

## 3Ô∏è‚É£ SQL TH·ªêNG K√ä C·ªêT L√ïI

```sql
SELECT dv.ten_dich_vu,
       COUNT(sd.SuDungID) AS so_luot,
       SUM(sd.SoLuong * dv.gia) AS doanh_thu
FROM sudungdichvu sd
JOIN dich_vu dv ON sd.DichVuID = dv.id
GROUP BY sd.DichVuID;
```

---

## ‚úÖ K·∫æT QU·∫¢ ƒê·∫†T ƒê∆Ø·ª¢C

* Dashboard th·ªëng k√™ d·ªãch v·ª• ho√†n ch·ªânh
* C√≥ s·ªë li·ªáu t·ªïng
* C√≥ bi·ªÉu ƒë·ªì
* L·∫•y d·ªØ li·ªáu th·∫≠t t·ª´ MySQL
* Ph√π h·ª£p ch·∫•m ƒë·ªì √°n

---

N·∫øu b·∫°n mu·ªën:

* L·ªçc theo **ng√†y / th√°ng**
* Th·ªëng k√™ theo **ph√≤ng**
* Xu·∫•t **Excel / PDF**
* Giao di·ªán **Admin ho√†n ch·ªânh**

üëâ n√≥i ti·∫øp, m√¨nh l√†m th√™m cho b·∫°n.
